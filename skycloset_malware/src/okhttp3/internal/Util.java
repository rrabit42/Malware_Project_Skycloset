package okhttp3.internal;

import b.c;
import b.e;
import b.f;
import b.t;
import java.io.Closeable;
import java.io.IOException;
import java.io.InterruptedIOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.net.IDN;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.nio.charset.Charset;
import java.security.GeneralSecurityException;
import java.security.KeyStore;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.TimeZone;
import java.util.concurrent.ThreadFactory;
import java.util.concurrent.TimeUnit;
import java.util.regex.Pattern;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.net.ssl.X509TrustManager;
import okhttp3.Headers;
import okhttp3.HttpUrl;
import okhttp3.RequestBody;
import okhttp3.ResponseBody;
import okhttp3.internal.http2.Header;

public final class Util {
  public static final byte[] EMPTY_BYTE_ARRAY = new byte[0];
  
  public static final RequestBody EMPTY_REQUEST;
  
  public static final ResponseBody EMPTY_RESPONSE;
  
  public static final String[] EMPTY_STRING_ARRAY = new String[0];
  
  public static final Charset ISO_8859_1;
  
  public static final Comparator<String> NATURAL_ORDER;
  
  public static final TimeZone UTC;
  
  private static final Charset UTF_16_BE;
  
  private static final f UTF_16_BE_BOM;
  
  private static final Charset UTF_16_LE;
  
  private static final f UTF_16_LE_BOM;
  
  private static final Charset UTF_32_BE;
  
  private static final f UTF_32_BE_BOM;
  
  private static final Charset UTF_32_LE;
  
  private static final f UTF_32_LE_BOM;
  
  public static final Charset UTF_8;
  
  private static final f UTF_8_BOM;
  
  private static final Pattern VERIFY_AS_IP_ADDRESS;
  
  private static final Method addSuppressedExceptionMethod;
  
  static  {
    arrayOfByte = EMPTY_BYTE_ARRAY;
    Method method = null;
    EMPTY_RESPONSE = ResponseBody.create(null, arrayOfByte);
    EMPTY_REQUEST = RequestBody.create(null, EMPTY_BYTE_ARRAY);
    UTF_32_LE_BOM = (UTF_32_BE_BOM = (UTF_16_LE_BOM = (UTF_16_BE_BOM = (UTF_8_BOM = f.c("efbbbf")).c("feff")).c("fffe")).c("0000ffff")).c("ffff0000");
    UTF_32_LE = (UTF_32_BE = (UTF_16_LE = (UTF_16_BE = (ISO_8859_1 = (UTF_8 = Charset.forName("UTF-8")).forName("ISO-8859-1")).forName("UTF-16BE")).forName("UTF-16LE")).forName("UTF-32BE")).forName("UTF-32LE");
    UTC = TimeZone.getTimeZone("GMT");
    NATURAL_ORDER = new Object();
    try {
      Method method1 = Throwable.class.getDeclaredMethod("addSuppressed", new Class[] { Throwable.class });
      method = method1;
    } catch (Exception arrayOfByte) {}
    addSuppressedExceptionMethod = method;
    VERIFY_AS_IP_ADDRESS = Pattern.compile("([0-9a-fA-F]*:[0-9a-fA-F:.]*)|([\\d.]+)");
  }
  
  public static void addSuppressedIfPossible(Throwable paramThrowable1, Throwable paramThrowable2) {
    Method method = addSuppressedExceptionMethod;
    if (method != null)
      try {
        method.invoke(paramThrowable1, new Object[] { paramThrowable2 });
        return;
      } catch (InvocationTargetException|IllegalAccessException paramThrowable1) {
        return;
      }  
  }
  
  public static AssertionError assertionError(String paramString, Exception paramException) {
    AssertionError assertionError = new AssertionError(paramString);
    try {
      assertionError.initCause(paramException);
      return assertionError;
    } catch (IllegalStateException paramException) {
      return assertionError;
    } 
  }
  
  public static Charset bomAwareCharset(e parame, Charset paramCharset) {
    if (parame.a(0L, UTF_8_BOM)) {
      parame.i(UTF_8_BOM.h());
      return UTF_8;
    } 
    if (parame.a(0L, UTF_16_BE_BOM)) {
      parame.i(UTF_16_BE_BOM.h());
      return UTF_16_BE;
    } 
    if (parame.a(0L, UTF_16_LE_BOM)) {
      parame.i(UTF_16_LE_BOM.h());
      return UTF_16_LE;
    } 
    if (parame.a(0L, UTF_32_BE_BOM)) {
      parame.i(UTF_32_BE_BOM.h());
      return UTF_32_BE;
    } 
    if (parame.a(0L, UTF_32_LE_BOM)) {
      parame.i(UTF_32_LE_BOM.h());
      return UTF_32_LE;
    } 
    return paramCharset;
  }
  
  public static String canonicalizeHost(String paramString) {
    if (paramString.contains(":")) {
      InetAddress inetAddress;
      if (paramString.startsWith("[") && paramString.endsWith("]")) {
        inetAddress = decodeIpv6(paramString, 1, paramString.length() - 1);
      } else {
        inetAddress = decodeIpv6(paramString, 0, paramString.length());
      } 
      if (inetAddress == null)
        return null; 
      byte[] arrayOfByte = inetAddress.getAddress();
      if (arrayOfByte.length == 16)
        return inet6AddressToAscii(arrayOfByte); 
      StringBuilder stringBuilder = new StringBuilder();
      stringBuilder.append("Invalid IPv6 address: '");
      stringBuilder.append(paramString);
      stringBuilder.append("'");
      throw new AssertionError(stringBuilder.toString());
    } 
    try {
      paramString = IDN.toASCII(paramString).toLowerCase(Locale.US);
      if (paramString.isEmpty())
        return null; 
      boolean bool = containsInvalidHostnameAsciiCodes(paramString);
      return bool ? null : paramString;
    } catch (IllegalArgumentException paramString) {
      return null;
    } 
  }
  
  public static int checkDuration(String paramString, long paramLong, TimeUnit paramTimeUnit) {
    int i = paramLong cmp 0L;
    if (i >= 0) {
      if (paramTimeUnit != null) {
        paramLong = paramTimeUnit.toMillis(paramLong);
        if (paramLong <= 2147483647L) {
          if (paramLong != 0L || i <= 0)
            return (int)paramLong; 
          StringBuilder stringBuilder2 = new StringBuilder();
          stringBuilder2.append(paramString);
          stringBuilder2.append(" too small.");
          throw new IllegalArgumentException(stringBuilder2.toString());
        } 
        StringBuilder stringBuilder1 = new StringBuilder();
        stringBuilder1.append(paramString);
        stringBuilder1.append(" too large.");
        throw new IllegalArgumentException(stringBuilder1.toString());
      } 
      throw new NullPointerException("unit == null");
    } 
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append(paramString);
    stringBuilder.append(" < 0");
    throw new IllegalArgumentException(stringBuilder.toString());
  }
  
  public static void checkOffsetAndCount(long paramLong1, long paramLong2, long paramLong3) {
    if ((paramLong2 | paramLong3) >= 0L && paramLong2 <= paramLong1 && paramLong1 - paramLong2 >= paramLong3)
      return; 
    throw new ArrayIndexOutOfBoundsException();
  }
  
  public static void closeQuietly(Closeable paramCloseable) {
    if (paramCloseable != null)
      try {
        paramCloseable.close();
        return;
      } catch (RuntimeException paramCloseable) {
        throw paramCloseable;
      } catch (Exception paramCloseable) {
        return;
      }  
  }
  
  public static void closeQuietly(ServerSocket paramServerSocket) {
    if (paramServerSocket != null)
      try {
        paramServerSocket.close();
        return;
      } catch (RuntimeException paramServerSocket) {
        throw paramServerSocket;
      } catch (Exception paramServerSocket) {
        return;
      }  
  }
  
  public static void closeQuietly(Socket paramSocket) {
    if (paramSocket != null)
      try {
        paramSocket.close();
        return;
      } catch (AssertionError paramSocket) {
        if (isAndroidGetsocknameError(paramSocket))
          return; 
        throw paramSocket;
      } catch (RuntimeException paramSocket) {
        throw paramSocket;
      } catch (Exception paramSocket) {
        return;
      }  
  }
  
  public static String[] concat(String[] paramArrayOfString, String paramString) {
    String[] arrayOfString = new String[paramArrayOfString.length + 1];
    System.arraycopy(paramArrayOfString, 0, arrayOfString, 0, paramArrayOfString.length);
    arrayOfString[arrayOfString.length - 1] = paramString;
    return arrayOfString;
  }
  
  private static boolean containsInvalidHostnameAsciiCodes(String paramString) {
    byte b = 0;
    while (b < paramString.length()) {
      char c = paramString.charAt(b);
      if (c > '\037') {
        if (c >= '')
          return true; 
        if (" #%/:?@[\\]".indexOf(c) != -1)
          return true; 
        b++;
        continue;
      } 
      return true;
    } 
    return false;
  }
  
  public static int decodeHexDigit(char paramChar) {
    if (paramChar >= '0' && paramChar <= '9')
      return paramChar - '0'; 
    char c = 'a';
    if (paramChar < 'a' || paramChar > 'f') {
      c = 'A';
      if (paramChar < 'A' || paramChar > 'F')
        return -1; 
    } 
    return paramChar - c + '\n';
  }
  
  private static boolean decodeIpv4Suffix(String paramString, int paramInt1, int paramInt2, byte[] paramArrayOfByte, int paramInt3) {
    int j = paramInt3;
    int i = paramInt1;
    while (i < paramInt2) {
      if (j == paramArrayOfByte.length)
        return false; 
      paramInt1 = i;
      if (j != paramInt3) {
        if (paramString.charAt(i) != '.')
          return false; 
        paramInt1 = i + 1;
      } 
      i = paramInt1;
      char c = Character.MIN_VALUE;
      while (i < paramInt2) {
        char c1 = paramString.charAt(i);
        if (c1 < '0' || c1 > '9')
          break; 
        if (!c && paramInt1 != i)
          return false; 
        c = c * 10 + c1 - '0';
        if (c > 'Ã¿')
          return false; 
        i++;
      } 
      if (i - paramInt1 == 0)
        return false; 
      paramArrayOfByte[j] = (byte)c;
      j++;
    } 
    return !(j != paramInt3 + 4);
  }
  
  private static InetAddress decodeIpv6(String paramString, int paramInt1, int paramInt2) {
    int n;
    int k;
    byte[] arrayOfByte = new byte[16];
    int j = -1;
    int m = j;
    int i = 0;
    while (true) {
      k = i;
      n = j;
      if (paramInt1 < paramInt2) {
        if (i == arrayOfByte.length)
          return null; 
        k = paramInt1 + 2;
        if (k <= paramInt2 && paramString.regionMatches(paramInt1, "::", 0, 2)) {
          if (j != -1)
            return null; 
          paramInt1 = i + 2;
          if (k == paramInt2) {
            n = paramInt1;
            k = paramInt1;
            break;
          } 
          j = paramInt1;
          i = paramInt1;
          paramInt1 = k;
        } else {
          k = paramInt1;
          if (i != 0)
            if (paramString.regionMatches(paramInt1, ":", 0, 1)) {
              k = paramInt1 + 1;
            } else {
              if (paramString.regionMatches(paramInt1, ".", 0, 1)) {
                if (!decodeIpv4Suffix(paramString, m, paramInt2, arrayOfByte, i - 2))
                  return null; 
                k = i + 2;
                n = j;
                break;
              } 
              return null;
            }  
          paramInt1 = k;
        } 
        m = 0;
        for (k = paramInt1; k < paramInt2; k++) {
          n = decodeHexDigit(paramString.charAt(k));
          if (n == -1)
            break; 
          m = (m << 4) + n;
        } 
        n = k - paramInt1;
        if (n != 0) {
          if (n > 4)
            return null; 
          n = i + 1;
          arrayOfByte[i] = (byte)(m >>> 8 & 0xFF);
          i = n + 1;
          arrayOfByte[n] = (byte)(m & 0xFF);
          m = paramInt1;
          paramInt1 = k;
          continue;
        } 
        return null;
      } 
      break;
    } 
    if (k != arrayOfByte.length) {
      if (n == -1)
        return null; 
      paramInt1 = arrayOfByte.length;
      paramInt2 = k - n;
      System.arraycopy(arrayOfByte, n, arrayOfByte, paramInt1 - paramInt2, paramInt2);
      Arrays.fill(arrayOfByte, n, arrayOfByte.length - k + n, (byte)0);
    } 
    try {
      return InetAddress.getByAddress(arrayOfByte);
    } catch (UnknownHostException paramString) {
      throw new AssertionError();
    } 
  }
  
  public static int delimiterOffset(String paramString, int paramInt1, int paramInt2, char paramChar) {
    while (paramInt1 < paramInt2) {
      if (paramString.charAt(paramInt1) == paramChar)
        return paramInt1; 
      paramInt1++;
    } 
    return paramInt2;
  }
  
  public static int delimiterOffset(String paramString1, int paramInt1, int paramInt2, String paramString2) {
    while (paramInt1 < paramInt2) {
      if (paramString2.indexOf(paramString1.charAt(paramInt1)) != -1)
        return paramInt1; 
      paramInt1++;
    } 
    return paramInt2;
  }
  
  public static boolean discard(t paramt, int paramInt, TimeUnit paramTimeUnit) {
    try {
      return skipAll(paramt, paramInt, paramTimeUnit);
    } catch (IOException paramt) {
      return false;
    } 
  }
  
  public static boolean equal(Object paramObject1, Object paramObject2) { return (paramObject1 == paramObject2 || (paramObject1 != null && paramObject1.equals(paramObject2))); }
  
  public static String format(String paramString, Object... paramVarArgs) { return String.format(Locale.US, paramString, paramVarArgs); }
  
  public static String hostHeader(HttpUrl paramHttpUrl, boolean paramBoolean) {
    String str;
    if (paramHttpUrl.host().contains(":")) {
      StringBuilder stringBuilder1 = new StringBuilder();
      stringBuilder1.append("[");
      stringBuilder1.append(paramHttpUrl.host());
      stringBuilder1.append("]");
      str = stringBuilder1.toString();
    } else {
      str = paramHttpUrl.host();
    } 
    if (!paramBoolean) {
      String str1 = str;
      if (paramHttpUrl.port() != HttpUrl.defaultPort(paramHttpUrl.scheme())) {
        StringBuilder stringBuilder1 = new StringBuilder();
        stringBuilder1.append(str);
        stringBuilder1.append(":");
        stringBuilder1.append(paramHttpUrl.port());
        return stringBuilder1.toString();
      } 
      return str1;
    } 
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append(str);
    stringBuilder.append(":");
    stringBuilder.append(paramHttpUrl.port());
    return stringBuilder.toString();
  }
  
  public static <T> List<T> immutableList(List<T> paramList) { return Collections.unmodifiableList(new ArrayList(paramList)); }
  
  public static <T> List<T> immutableList(T... paramVarArgs) { return Collections.unmodifiableList(Arrays.asList((Object[])paramVarArgs.clone())); }
  
  public static <K, V> Map<K, V> immutableMap(Map<K, V> paramMap) { return paramMap.isEmpty() ? Collections.emptyMap() : Collections.unmodifiableMap(new LinkedHashMap(paramMap)); }
  
  public static int indexOf(Comparator<String> paramComparator, String[] paramArrayOfString, String paramString) {
    int i = paramArrayOfString.length;
    for (byte b = 0; b < i; b++) {
      if (paramComparator.compare(paramArrayOfString[b], paramString) == 0)
        return b; 
    } 
    return -1;
  }
  
  public static int indexOfControlOrNonAscii(String paramString) {
    int i = paramString.length();
    byte b = 0;
    while (b < i) {
      char c = paramString.charAt(b);
      if (c > '\037') {
        if (c >= '')
          return b; 
        b++;
        continue;
      } 
      return b;
    } 
    return -1;
  }
  
  private static String inet6AddressToAscii(byte[] paramArrayOfByte) {
    byte b4 = 0;
    byte b2 = 0;
    byte b3 = -1;
    byte b1 = b2;
    while (b1 < paramArrayOfByte.length) {
      byte b5;
      for (b5 = b1; b5 < 16 && paramArrayOfByte[b5] == 0 && paramArrayOfByte[b5 + true] == 0; b5 += 2);
      byte b7 = b5 - b1;
      byte b = b3;
      byte b6 = b2;
      if (b7 > b2) {
        b = b3;
        b6 = b2;
        if (b7 >= 4) {
          b6 = b7;
          b = b1;
        } 
      } 
      b1 = b5 + 2;
      b3 = b;
      b2 = b6;
    } 
    c c = new c();
    for (b1 = b4; b1 < paramArrayOfByte.length; b1 += 2) {
      if (b1 == b3) {
        c.b(58);
        byte b = b1 + b2;
        b1 = b;
        if (b == 16) {
          c.b(58);
          b1 = b;
        } 
        continue;
      } 
      if (b1 > 0)
        c.b(58); 
      c.l(((paramArrayOfByte[b1] & 0xFF) << 8 | paramArrayOfByte[b1 + 1] & 0xFF));
    } 
    return c.r();
  }
  
  public static String[] intersect(Comparator<? super String> paramComparator, String[] paramArrayOfString1, String[] paramArrayOfString2) {
    ArrayList arrayList = new ArrayList();
    int i = paramArrayOfString1.length;
    for (byte b = 0; b < i; b++) {
      String str = paramArrayOfString1[b];
      int j = paramArrayOfString2.length;
      byte b1;
      for (b1 = 0; b1 < j; b1++) {
        if (paramComparator.compare(str, paramArrayOfString2[b1]) == 0) {
          arrayList.add(str);
          break;
        } 
      } 
    } 
    return (String[])arrayList.toArray(new String[arrayList.size()]);
  }
  
  public static boolean isAndroidGetsocknameError(AssertionError paramAssertionError) { return (paramAssertionError.getCause() != null && paramAssertionError.getMessage() != null && paramAssertionError.getMessage().contains("getsockname failed")); }
  
  public static boolean nonEmptyIntersection(Comparator<String> paramComparator, String[] paramArrayOfString1, String[] paramArrayOfString2) {
    if (paramArrayOfString1 != null && paramArrayOfString2 != null && paramArrayOfString1.length != 0) {
      if (paramArrayOfString2.length == 0)
        return false; 
      int i = paramArrayOfString1.length;
      for (byte b = 0; b < i; b++) {
        String str = paramArrayOfString1[b];
        int j = paramArrayOfString2.length;
        byte b1;
        for (b1 = 0; b1 < j; b1++) {
          if (paramComparator.compare(str, paramArrayOfString2[b1]) == 0)
            return true; 
        } 
      } 
    } 
    return false;
  }
  
  public static X509TrustManager platformTrustManager() {
    try {
      TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
      trustManagerFactory.init((KeyStore)null);
      TrustManager[] arrayOfTrustManager = trustManagerFactory.getTrustManagers();
      if (arrayOfTrustManager.length == 1 && arrayOfTrustManager[0] instanceof X509TrustManager)
        return (X509TrustManager)arrayOfTrustManager[0]; 
      StringBuilder stringBuilder = new StringBuilder();
      stringBuilder.append("Unexpected default trust managers:");
      stringBuilder.append(Arrays.toString(arrayOfTrustManager));
      throw new IllegalStateException(stringBuilder.toString());
    } catch (GeneralSecurityException generalSecurityException) {
      throw assertionError("No System TLS", generalSecurityException);
    } 
  }
  
  public static boolean skipAll(t paramt, int paramInt, TimeUnit paramTimeUnit) {
    l2 = System.nanoTime();
    if (paramt.timeout().hasDeadline()) {
      l1 = paramt.timeout().deadlineNanoTime() - l2;
    } else {
      l1 = Float.MAX_VALUE;
    } 
    paramt.timeout().deadlineNanoTime(Math.min(l1, paramTimeUnit.toNanos(paramInt)) + l2);
    try {
      c c = new c();
      while (paramt.read(c, 8192L) != -1L)
        c.u(); 
      if (l1 == Float.MAX_VALUE)
        return true; 
      return true;
    } catch (InterruptedIOException paramTimeUnit) {
      if (l1 == Float.MAX_VALUE)
        return false; 
      return false;
    } finally {
      if (l1 == Float.MAX_VALUE) {
        paramt.timeout().clearDeadline();
      } else {
        paramt.timeout().deadlineNanoTime(l2 + l1);
      } 
    } 
  }
  
  public static int skipLeadingAsciiWhitespace(String paramString, int paramInt1, int paramInt2) {
    while (paramInt1 < paramInt2) {
      switch (paramString.charAt(paramInt1)) {
        default:
          return paramInt1;
        case '\t':
        case '\n':
        case '\f':
        case '\r':
        case ' ':
          break;
      } 
      paramInt1++;
    } 
    return paramInt2;
  }
  
  public static int skipTrailingAsciiWhitespace(String paramString, int paramInt1, int paramInt2) {
    while (--paramInt2 >= paramInt1) {
      switch (paramString.charAt(paramInt2)) {
        default:
          return paramInt2 + 1;
        case '\t':
        case '\n':
        case '\f':
        case '\r':
        case ' ':
          break;
      } 
      paramInt2--;
    } 
    return paramInt1;
  }
  
  public static ThreadFactory threadFactory(String paramString, boolean paramBoolean) { return new Object(paramString, paramBoolean); }
  
  public static Headers toHeaders(List<Header> paramList) {
    Headers.Builder builder = new Headers.Builder();
    for (Header header : paramList)
      Internal.instance.addLenient(builder, header.name.a(), header.value.a()); 
    return builder.build();
  }
  
  public static String trimSubstring(String paramString, int paramInt1, int paramInt2) {
    paramInt1 = skipLeadingAsciiWhitespace(paramString, paramInt1, paramInt2);
    return paramString.substring(paramInt1, skipTrailingAsciiWhitespace(paramString, paramInt1, paramInt2));
  }
  
  public static boolean verifyAsIpAddress(String paramString) { return VERIFY_AS_IP_ADDRESS.matcher(paramString).matches(); }
}
