package com.facebook.imagepipeline.n;

import com.facebook.b.a.d;
import com.facebook.common.d.f;
import com.facebook.common.g.g;
import com.facebook.common.h.a;
import com.facebook.imagepipeline.d.f;
import com.facebook.imagepipeline.d.p;
import com.facebook.imagepipeline.j.d;
import com.facebook.imagepipeline.o.b;
import java.util.Map;

public class s extends Object implements ak<d> {
  private final p<d, g> a;
  
  private final f b;
  
  private final ak<d> c;
  
  public s(p<d, g> paramp, f paramf, ak<d> paramak) {
    this.a = paramp;
    this.b = paramf;
    this.c = paramak;
  }
  
  public void a(k<d> paramk, al paramal) {
    str = paramal.b();
    an = paramal.c();
    an.a(str, "EncodedMemoryCacheProducer");
    b b1 = paramal.a();
    d d1 = this.b.c(b1, paramal.d());
    a2 = this.a.a(d1);
    d = null;
    b1 = null;
    if (a2 != null)
      try {
        d = new d(a2);
        map2 = b1;
      } finally {
        a.c(a2);
      }  
    if (map2.e().a() >= b.b.c.a()) {
      if (an.b(str)) {
        map2 = f.a("cached_value_found", "false");
      } else {
        map2 = null;
      } 
      an.a(str, "EncodedMemoryCacheProducer", map2);
      an.a(str, "EncodedMemoryCacheProducer", false);
      paramk.b(null, 1);
      a.c(a2);
      return;
    } 
    boolean bool = map2.a().o();
    a a1 = new a(paramk, this.a, d1, bool);
    Map map1 = d;
    if (an.b(str))
      map1 = f.a("cached_value_found", "false"); 
    an.a(str, "EncodedMemoryCacheProducer", map1);
    this.c.a(a1, map2);
    a.c(a2);
  }
}
