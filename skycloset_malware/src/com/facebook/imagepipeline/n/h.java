package com.facebook.imagepipeline.n;

import com.facebook.b.a.d;
import com.facebook.common.d.f;
import com.facebook.common.h.a;
import com.facebook.imagepipeline.d.f;
import com.facebook.imagepipeline.d.p;
import com.facebook.imagepipeline.j.b;
import com.facebook.imagepipeline.o.b;
import java.util.Map;

public class h extends Object implements ak<a<b>> {
  private final p<d, b> a;
  
  private final f b;
  
  private final ak<a<b>> c;
  
  public h(p<d, b> paramp, f paramf, ak<a<b>> paramak) {
    this.a = paramp;
    this.b = paramf;
    this.c = paramak;
  }
  
  protected k<a<b>> a(k<a<b>> paramk, d paramd, boolean paramBoolean) { return new Object(this, paramk, paramd, paramBoolean); }
  
  protected String a() { return "BitmapMemoryCacheProducer"; }
  
  public void a(k<a<b>> paramk, al paramal) {
    an an = paramal.c();
    String str1 = paramal.b();
    an.a(str1, a());
    b b1 = paramal.a();
    Object object2 = paramal.d();
    d d = this.b.a(b1, object2);
    a a1 = this.a.a(d);
    object2 = null;
    if (a1 != null) {
      boolean bool = ((b)a1.a()).c().c();
      if (bool) {
        String str = a();
        if (an.b(str1)) {
          Map map = f.a("cached_value_found", "true");
        } else {
          b1 = null;
        } 
        an.a(str1, str, b1);
        an.a(str1, a(), true);
        paramk.b(1.0F);
      } 
      paramk.b(a1, b.a(bool));
      a1.close();
      if (bool)
        return; 
    } 
    if (paramal.e().a() >= b.b.d.a()) {
      String str = a();
      if (an.b(str1)) {
        Map map = f.a("cached_value_found", "false");
      } else {
        paramal = null;
      } 
      an.a(str1, str, paramal);
      an.a(str1, a(), false);
      paramk.b(null, 1);
      return;
    } 
    k k1 = a(paramk, d, paramal.a().o());
    String str2 = a();
    Object object1 = object2;
    if (an.b(str1))
      object1 = f.a("cached_value_found", "false"); 
    an.a(str1, str2, object1);
    this.c.a(k1, paramal);
  }
}
