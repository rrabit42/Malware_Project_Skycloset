package com.facebook.imagepipeline.l;

import android.annotation.TargetApi;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Rect;
import com.facebook.common.d.i;
import com.facebook.common.g.g;
import com.facebook.common.h.a;
import com.facebook.imagepipeline.j.d;
import com.facebook.imagepipeline.memory.j;

@TargetApi(19)
public class d extends b {
  private final j b;
  
  public d(j paramj) { this.b = paramj; }
  
  private static void a(byte[] paramArrayOfByte, int paramInt) {
    paramArrayOfByte[paramInt] = -1;
    paramArrayOfByte[paramInt + 1] = -39;
  }
  
  protected Bitmap a(a<g> parama, int paramInt, BitmapFactory.Options paramOptions) {
    byte[] arrayOfByte;
    boolean bool;
    if (a(parama, paramInt)) {
      arrayOfByte = null;
    } else {
      arrayOfByte = a;
    } 
    g g = (g)parama.a();
    if (paramInt <= g.a()) {
      bool = true;
    } else {
      bool = false;
    } 
    i.a(bool);
    j j1 = this.b;
    int i = paramInt + 2;
    a1 = j1.a(i);
    try {
      byte[] arrayOfByte1 = (byte[])a1.a();
      g.a(0, arrayOfByte1, 0, paramInt);
      int k = paramInt;
      if (arrayOfByte != null) {
        a(arrayOfByte1, paramInt);
        k = i;
      } 
      return (Bitmap)i.a(BitmapFactory.decodeByteArray(arrayOfByte1, 0, k, paramOptions), "BitmapFactory returned null");
    } finally {
      a.c(a1);
    } 
  }
  
  protected Bitmap a(a<g> parama, BitmapFactory.Options paramOptions) {
    g g = (g)parama.a();
    int i = g.a();
    parama = this.b.a(i);
    try {
      byte[] arrayOfByte = (byte[])parama.a();
      g.a(0, arrayOfByte, 0, i);
      return (Bitmap)i.a(BitmapFactory.decodeByteArray(arrayOfByte, 0, i, paramOptions), "BitmapFactory returned null");
    } finally {
      a.c(parama);
    } 
  }
}
