package com.facebook.imagepipeline.memory;

import com.facebook.common.d.i;
import com.facebook.common.g.g;
import com.facebook.common.g.j;
import com.facebook.common.h.a;

public class o extends j {
  private final l a;
  
  private a<NativeMemoryChunk> b;
  
  private int c;
  
  public o(l paraml) { this(paraml, paraml.d()); }
  
  public o(l paraml, int paramInt) {
    if (paramInt > 0) {
      bool = true;
    } else {
      bool = false;
    } 
    i.a(bool);
    this.a = (l)i.a(paraml);
    this.c = 0;
    this.b = a.a(this.a.a(paramInt), this.a);
  }
  
  private void d() {
    if (a.a(this.b))
      return; 
    throw new a();
  }
  
  void a(int paramInt) {
    d();
    if (paramInt <= ((NativeMemoryChunk)this.b.a()).b())
      return; 
    NativeMemoryChunk nativeMemoryChunk = (NativeMemoryChunk)this.a.a(paramInt);
    ((NativeMemoryChunk)this.b.a()).a(0, nativeMemoryChunk, 0, this.c);
    this.b.close();
    this.b = a.a(nativeMemoryChunk, this.a);
  }
  
  public int b() { return this.c; }
  
  public m c() {
    d();
    return new m(this.b, this.c);
  }
  
  public void close() {
    a.c(this.b);
    this.b = null;
    this.c = -1;
    super.close();
  }
  
  public void write(int paramInt) { write(new byte[] { (byte)paramInt }); }
  
  public void write(byte[] paramArrayOfByte, int paramInt1, int paramInt2) {
    if (paramInt1 >= 0 && paramInt2 >= 0 && paramInt1 + paramInt2 <= paramArrayOfByte.length) {
      d();
      a(this.c + paramInt2);
      ((NativeMemoryChunk)this.b.a()).a(this.c, paramArrayOfByte, paramInt1, paramInt2);
      this.c += paramInt2;
      return;
    } 
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("length=");
    stringBuilder.append(paramArrayOfByte.length);
    stringBuilder.append("; regionStart=");
    stringBuilder.append(paramInt1);
    stringBuilder.append("; regionLength=");
    stringBuilder.append(paramInt2);
    throw new ArrayIndexOutOfBoundsException(stringBuilder.toString());
  }
}
