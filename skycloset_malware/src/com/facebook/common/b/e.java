package com.facebook.common.b;

import java.util.concurrent.atomic.AtomicInteger;

public abstract class e<T> extends Object implements Runnable {
  protected final AtomicInteger a = new AtomicInteger(0);
  
  public void a() {
    if (this.a.compareAndSet(0, 2))
      b(); 
  }
  
  protected void a(Exception paramException) {}
  
  protected void a(T paramT) {}
  
  protected void b() {}
  
  protected void b(T paramT) {}
  
  protected abstract T c();
  
  public final void run() {
    if (!this.a.compareAndSet(0, 1))
      return; 
    try {
      object = c();
      this.a.set(3);
      try {
        a(object);
        return;
      } finally {
        b(object);
      } 
    } catch (Exception exception) {
      this.a.set(4);
      a(exception);
      return;
    } 
  }
}
