package com.facebook.react.modules.camera;

import android.os.AsyncTask;
import android.util.Base64OutputStream;
import com.facebook.react.bridge.Callback;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.module.a.a;
import java.io.ByteArrayOutputStream;
import java.io.Closeable;
import java.io.IOException;
import java.io.InputStream;

@a(a = "ImageStoreManager")
public class ImageStoreManager extends ReactContextBaseJavaModule {
  private static final int BUFFER_SIZE = 8192;
  
  public ImageStoreManager(ReactApplicationContext paramReactApplicationContext) { super(paramReactApplicationContext); }
  
  private static void closeQuietly(Closeable paramCloseable) {
    try {
      paramCloseable.close();
      return;
    } catch (IOException paramCloseable) {
      return;
    } 
  }
  
  String convertInputStreamToBase64OutputStream(InputStream paramInputStream) {
    byteArrayOutputStream = new ByteArrayOutputStream();
    base64OutputStream = new Base64OutputStream(byteArrayOutputStream, 2);
    byte[] arrayOfByte = new byte[8192];
    try {
      while (true) {
        int i = paramInputStream.read(arrayOfByte);
        if (i > -1) {
          base64OutputStream.write(arrayOfByte, 0, i);
          continue;
        } 
        break;
      } 
      return byteArrayOutputStream.toString();
    } finally {
      closeQuietly(base64OutputStream);
    } 
  }
  
  @ReactMethod
  public void getBase64ForTag(String paramString, Callback paramCallback1, Callback paramCallback2) { (new a(this, getReactApplicationContext(), paramString, paramCallback1, paramCallback2, null)).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, new Void[0]); }
  
  public String getName() { return "ImageStoreManager"; }
}
