package com.facebook.react.modules.timepicker;

import android.os.Bundle;
import android.support.v4.app.e;
import android.support.v4.app.g;
import android.support.v4.app.k;
import com.facebook.react.bridge.Promise;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.bridge.ReadableMap;
import com.facebook.react.module.a.a;

@a(a = "TimePickerAndroid")
public class TimePickerDialogModule extends ReactContextBaseJavaModule {
  static final String ACTION_DISMISSED = "dismissedAction";
  
  static final String ACTION_TIME_SET = "timeSetAction";
  
  static final String ARG_HOUR = "hour";
  
  static final String ARG_IS24HOUR = "is24Hour";
  
  static final String ARG_MINUTE = "minute";
  
  static final String ARG_MODE = "mode";
  
  private static final String ERROR_NO_ACTIVITY = "E_NO_ACTIVITY";
  
  public static final String FRAGMENT_TAG = "TimePickerAndroid";
  
  public TimePickerDialogModule(ReactApplicationContext paramReactApplicationContext) { super(paramReactApplicationContext); }
  
  private Bundle createFragmentArguments(ReadableMap paramReadableMap) {
    Bundle bundle = new Bundle();
    if (paramReadableMap.hasKey("hour") && !paramReadableMap.isNull("hour"))
      bundle.putInt("hour", paramReadableMap.getInt("hour")); 
    if (paramReadableMap.hasKey("minute") && !paramReadableMap.isNull("minute"))
      bundle.putInt("minute", paramReadableMap.getInt("minute")); 
    if (paramReadableMap.hasKey("is24Hour") && !paramReadableMap.isNull("is24Hour"))
      bundle.putBoolean("is24Hour", paramReadableMap.getBoolean("is24Hour")); 
    if (paramReadableMap.hasKey("mode") && !paramReadableMap.isNull("mode"))
      bundle.putString("mode", paramReadableMap.getString("mode")); 
    return bundle;
  }
  
  public String getName() { return "TimePickerAndroid"; }
  
  @ReactMethod
  public void open(ReadableMap paramReadableMap, Promise paramPromise) {
    g g = (g)getCurrentActivity();
    if (g == null) {
      paramPromise.reject("E_NO_ACTIVITY", "Tried to open a TimePicker dialog while not attached to an Activity");
      return;
    } 
    k k = g.f();
    e e = (e)k.a("TimePickerAndroid");
    if (e != null)
      e.c(); 
    b b = new b();
    if (paramReadableMap != null)
      b.g(createFragmentArguments(paramReadableMap)); 
    a a = new a(this, paramPromise);
    b.a(a);
    b.a(a);
    b.a(k, "TimePickerAndroid");
  }
}
