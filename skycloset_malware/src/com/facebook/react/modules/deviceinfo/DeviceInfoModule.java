package com.facebook.react.modules.deviceinfo;

import android.content.Context;
import com.facebook.react.bridge.BaseJavaModule;
import com.facebook.react.bridge.LifecycleEventListener;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.module.a.a;
import com.facebook.react.modules.core.DeviceEventManagerModule;
import com.facebook.react.uimanager.c;
import java.util.HashMap;
import java.util.Map;

@a(a = "DeviceInfo")
public class DeviceInfoModule extends BaseJavaModule implements LifecycleEventListener {
  public static final String NAME = "DeviceInfo";
  
  private float mFontScale;
  
  private ReactApplicationContext mReactApplicationContext = null;
  
  public DeviceInfoModule(Context paramContext) {
    c.a(paramContext);
    this.mFontScale = (paramContext.getResources().getConfiguration()).fontScale;
  }
  
  public DeviceInfoModule(ReactApplicationContext paramReactApplicationContext) {
    this(paramReactApplicationContext);
    this.mReactApplicationContext = paramReactApplicationContext;
    this.mReactApplicationContext.addLifecycleEventListener(this);
  }
  
  public void emitUpdateDimensionsEvent() {
    ReactApplicationContext reactApplicationContext = this.mReactApplicationContext;
    if (reactApplicationContext == null)
      return; 
    ((DeviceEventManagerModule.RCTDeviceEventEmitter)reactApplicationContext.getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class)).emit("didUpdateDimensions", c.b(this.mFontScale));
  }
  
  public Map<String, Object> getConstants() {
    HashMap hashMap = new HashMap();
    hashMap.put("Dimensions", c.a(this.mFontScale));
    return hashMap;
  }
  
  public String getName() { return "DeviceInfo"; }
  
  public void onHostDestroy() {}
  
  public void onHostPause() {}
  
  public void onHostResume() {
    ReactApplicationContext reactApplicationContext = this.mReactApplicationContext;
    if (reactApplicationContext == null)
      return; 
    float f = (reactApplicationContext.getResources().getConfiguration()).fontScale;
    if (this.mFontScale != f) {
      this.mFontScale = f;
      emitUpdateDimensionsEvent();
    } 
  }
}
