package com.facebook.react.modules.network;

import com.facebook.common.e.a;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.charset.CharacterCodingException;
import java.nio.charset.Charset;
import java.nio.charset.CharsetDecoder;

public class k {
  private final CharsetDecoder a;
  
  private byte[] b = null;
  
  public k(Charset paramCharset) { this.a = paramCharset.newDecoder(); }
  
  public String a(byte[] paramArrayOfByte, int paramInt) {
    byte[] arrayOfByte2 = this.b;
    byte[] arrayOfByte1 = paramArrayOfByte;
    int i = paramInt;
    if (arrayOfByte2 != null) {
      arrayOfByte1 = new byte[arrayOfByte2.length + paramInt];
      System.arraycopy(arrayOfByte2, 0, arrayOfByte1, 0, arrayOfByte2.length);
      System.arraycopy(paramArrayOfByte, 0, arrayOfByte1, this.b.length, paramInt);
      i = paramInt + this.b.length;
    } 
    byteBuffer = ByteBuffer.wrap(arrayOfByte1, 0, i);
    boolean bool = true;
    int j = 0;
    paramInt = j;
    paramArrayOfByte = null;
    while (true) {
      CharBuffer charBuffer;
      if (j == 0 && paramInt < 4)
        try {
          CharBuffer charBuffer1 = this.a.decode(byteBuffer);
          j = 1;
          charBuffer = charBuffer1;
          continue;
        } catch (CharacterCodingException byteBuffer) {
          byteBuffer = (byteBuffer = null).wrap(arrayOfByte1, 0, i - ++paramInt);
          continue;
        }  
      if (j == 0 || paramInt <= 0)
        bool = false; 
      if (bool) {
        this.b = new byte[paramInt];
        System.arraycopy(arrayOfByte1, i - paramInt, this.b, 0, paramInt);
      } else {
        this.b = null;
      } 
      if (j == 0) {
        a.c("ReactNative", "failed to decode string from byte array");
        return "";
      } 
      return new String(charBuffer.array(), 0, charBuffer.length());
    } 
  }
}
