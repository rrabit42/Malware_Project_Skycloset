package com.facebook.react.animated;

import com.facebook.react.bridge.JSApplicationIllegalArgumentException;
import com.facebook.react.bridge.JavaOnlyMap;
import com.facebook.react.bridge.ReadableMap;
import com.facebook.react.bridge.ReadableMapKeySetIterator;
import com.facebook.react.uimanager.aj;
import com.facebook.react.uimanager.y;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

class m extends b {
  private int e = -1;
  
  private final l f;
  
  private final aj g;
  
  private final Map<String, Integer> h;
  
  private final JavaOnlyMap i;
  
  private final y j;
  
  m(ReadableMap paramReadableMap, l paraml, aj paramaj) {
    paramReadableMap = paramReadableMap.getMap("props");
    ReadableMapKeySetIterator readableMapKeySetIterator = paramReadableMap.keySetIterator();
    this.h = new HashMap();
    while (readableMapKeySetIterator.hasNextKey()) {
      String str = readableMapKeySetIterator.nextKey();
      int k = paramReadableMap.getInt(str);
      this.h.put(str, Integer.valueOf(k));
    } 
    this.i = new JavaOnlyMap();
    this.j = new y(this.i);
    this.f = paraml;
    this.g = paramaj;
  }
  
  public void a(int paramInt) {
    if (this.e == -1) {
      this.e = paramInt;
      return;
    } 
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("Animated node ");
    stringBuilder.append(this.d);
    stringBuilder.append(" is already attached to a view");
    throw new JSApplicationIllegalArgumentException(stringBuilder.toString());
  }
  
  public void b() {
    ReadableMapKeySetIterator readableMapKeySetIterator = this.i.keySetIterator();
    while (readableMapKeySetIterator.hasNextKey())
      this.i.putNull(readableMapKeySetIterator.nextKey()); 
    this.g.a(this.e, this.j);
  }
  
  public void b(int paramInt) {
    if (this.e == paramInt) {
      this.e = -1;
      return;
    } 
    throw new JSApplicationIllegalArgumentException("Attempting to disconnect view that has not been connected with the given animated node");
  }
  
  public final void c() {
    if (this.e == -1)
      return; 
    Iterator iterator = this.h.entrySet().iterator();
    while (iterator.hasNext()) {
      Map.Entry entry = (Map.Entry)iterator.next();
      b b1 = this.f.a(((Integer)entry.getValue()).intValue());
      if (b1 != null) {
        if (b1 instanceof o) {
          ((o)b1).a(this.i);
          continue;
        } 
        if (b1 instanceof s) {
          this.i.putDouble((String)entry.getKey(), ((s)b1).b());
          continue;
        } 
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("Unsupported type of node used in property node ");
        stringBuilder.append(b1.getClass());
        throw new IllegalArgumentException(stringBuilder.toString());
      } 
      throw new IllegalArgumentException("Mapped property node does not exists");
    } 
    this.g.a(this.e, this.j);
  }
}
