package com.facebook.react.views.text.frescosupport;

import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.widget.TextView;
import com.facebook.f.c.a;
import com.facebook.f.c.b;
import com.facebook.f.f.a;
import com.facebook.f.f.b;
import com.facebook.f.i.b;
import com.facebook.imagepipeline.o.c;
import com.facebook.react.bridge.ReadableMap;
import com.facebook.react.modules.fresco.a;
import com.facebook.react.uimanager.o;
import com.facebook.react.views.text.x;

public class b extends x {
  private Drawable a;
  
  private final b b;
  
  private final b<a> c;
  
  private final Object d;
  
  private int e;
  
  private int f;
  
  private Uri g;
  
  private int h;
  
  private ReadableMap i;
  
  private TextView j;
  
  public b(Resources paramResources, int paramInt1, int paramInt2, int paramInt3, Uri paramUri, ReadableMap paramReadableMap, b paramb, Object paramObject) {
    this.c = new b(b.a(paramResources).r());
    this.b = paramb;
    this.d = paramObject;
    this.f = paramInt3;
    if (paramUri == null)
      paramUri = Uri.EMPTY; 
    this.g = paramUri;
    this.i = paramReadableMap;
    this.h = (int)o.a(paramInt2);
    this.e = (int)o.a(paramInt1);
  }
  
  public Drawable a() { return this.a; }
  
  public void a(TextView paramTextView) { this.j = paramTextView; }
  
  public void b() { this.c.c(); }
  
  public void c() { this.c.c(); }
  
  public void d() { this.c.b(); }
  
  public void draw(Canvas paramCanvas, CharSequence paramCharSequence, int paramInt1, int paramInt2, float paramFloat, int paramInt3, int paramInt4, int paramInt5, Paint paramPaint) {
    if (this.a == null) {
      a a2 = a.a(c.a(this.g), this.i);
      a a1 = this.b.c().b(this.c.d()).a(this.d).b(a2).j();
      this.c.a(a1);
      this.b.c();
      this.a = this.c.f();
      this.a.setBounds(0, 0, this.h, this.e);
      paramInt1 = this.f;
      if (paramInt1 != 0)
        this.a.setColorFilter(paramInt1, PorterDuff.Mode.SRC_IN); 
      this.a.setCallback(this.j);
    } 
    paramCanvas.save();
    paramInt1 = (int)(paramPaint.descent() - paramPaint.ascent());
    paramCanvas.translate(paramFloat, (paramInt4 + (int)paramPaint.descent() - paramInt1 / 2 - ((this.a.getBounds()).bottom - (this.a.getBounds()).top) / 2));
    this.a.draw(paramCanvas);
    paramCanvas.restore();
  }
  
  public void e() { this.c.b(); }
  
  public int f() { return this.e; }
  
  public int getSize(Paint paramPaint, CharSequence paramCharSequence, int paramInt1, int paramInt2, Paint.FontMetricsInt paramFontMetricsInt) {
    if (paramFontMetricsInt != null) {
      paramFontMetricsInt.ascent = -this.e;
      paramFontMetricsInt.descent = 0;
      paramFontMetricsInt.top = paramFontMetricsInt.ascent;
      paramFontMetricsInt.bottom = 0;
    } 
    return this.h;
  }
}
