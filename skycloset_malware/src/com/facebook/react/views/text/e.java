package com.facebook.react.views.text;

import android.content.Context;
import android.graphics.Rect;
import android.text.Layout;
import android.text.TextPaint;
import android.util.DisplayMetrics;
import com.facebook.react.bridge.Arguments;
import com.facebook.react.bridge.WritableArray;
import com.facebook.react.bridge.WritableMap;

public class e {
  public static WritableArray a(CharSequence paramCharSequence, Layout paramLayout, TextPaint paramTextPaint, Context paramContext) {
    DisplayMetrics displayMetrics = paramContext.getResources().getDisplayMetrics();
    WritableArray writableArray = Arguments.createArray();
    paramTextPaint = new TextPaint(paramTextPaint);
    paramTextPaint.setTextSize(paramTextPaint.getTextSize() * 100.0F);
    Rect rect = new Rect();
    byte b = 0;
    paramTextPaint.getTextBounds("T", 0, 1, rect);
    double d1 = (rect.height() / 100.0F / displayMetrics.density);
    rect = new Rect();
    paramTextPaint.getTextBounds("x", 0, 1, rect);
    double d2 = (rect.height() / 100.0F / displayMetrics.density);
    while (b < paramLayout.getLineCount()) {
      Rect rect1 = new Rect();
      paramLayout.getLineBounds(b, rect1);
      WritableMap writableMap = Arguments.createMap();
      writableMap.putDouble("x", (paramLayout.getLineLeft(b) / displayMetrics.density));
      writableMap.putDouble("y", (rect1.top / displayMetrics.density));
      writableMap.putDouble("width", (paramLayout.getLineWidth(b) / displayMetrics.density));
      writableMap.putDouble("height", (rect1.height() / displayMetrics.density));
      writableMap.putDouble("descender", (paramLayout.getLineDescent(b) / displayMetrics.density));
      writableMap.putDouble("ascender", (-paramLayout.getLineAscent(b) / displayMetrics.density));
      writableMap.putDouble("baseline", (paramLayout.getLineBaseline(b) / displayMetrics.density));
      writableMap.putDouble("capHeight", d1);
      writableMap.putDouble("xHeight", d2);
      writableMap.putString("text", paramCharSequence.subSequence(paramLayout.getLineStart(b), paramLayout.getLineEnd(b)).toString());
      writableArray.pushMap(writableMap);
      b++;
    } 
    return writableArray;
  }
}
