package com.facebook.react.uimanager.events;

import android.util.LongSparseArray;
import com.facebook.i.a.a;
import com.facebook.react.bridge.LifecycleEventListener;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.UiThreadUtil;
import com.facebook.react.common.e;
import com.facebook.systrace.a;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.concurrent.atomic.AtomicInteger;

public class d implements LifecycleEventListener {
  private static final Comparator<c> a = new Object();
  
  private final Object b = new Object();
  
  private final Object c = new Object();
  
  private final ReactApplicationContext d;
  
  private final LongSparseArray<Integer> e = new LongSparseArray();
  
  private final Map<String, Short> f = e.a();
  
  private final a g = new a(this, null);
  
  private final ArrayList<c> h = new ArrayList();
  
  private final ArrayList<e> i = new ArrayList();
  
  private final List<a> j = new ArrayList();
  
  private final b k = new b(this, null);
  
  private final AtomicInteger l = new AtomicInteger();
  
  private c[] m = new c[16];
  
  private int n = 0;
  
  private short p = 0;
  
  public d(ReactApplicationContext paramReactApplicationContext) {
    this.d = paramReactApplicationContext;
    this.d.addLifecycleEventListener(this);
    this.o = new ReactEventEmitter(this.d);
  }
  
  private long a(int paramInt, String paramString, short paramShort) {
    short s;
    Short short = (Short)this.f.get(paramString);
    if (short != null) {
      s = short.shortValue();
    } else {
      s = this.p;
      this.p = (short)(s + 1);
      this.f.put(paramString, Short.valueOf(s));
    } 
    return a(paramInt, s, paramShort);
  }
  
  private static long a(int paramInt, short paramShort1, short paramShort2) {
    long l1 = paramInt;
    return (paramShort1 & 0xFFFFL) << 32 | l1 | (paramShort2 & 0xFFFFL) << 48;
  }
  
  private void b(c paramc) {
    int i1 = this.n;
    c[] arrayOfc = this.m;
    if (i1 == arrayOfc.length)
      this.m = (c[])Arrays.copyOf(arrayOfc, arrayOfc.length * 2); 
    arrayOfc = this.m;
    i1 = this.n;
    this.n = i1 + 1;
    arrayOfc[i1] = paramc;
  }
  
  private void d() {
    if (this.o != null)
      this.k.d(); 
  }
  
  private void e() {
    UiThreadUtil.assertOnUiThread();
    this.k.b();
  }
  
  private void f() { // Byte code:
    //   0: aload_0
    //   1: getfield b : Ljava/lang/Object;
    //   4: astore #7
    //   6: aload #7
    //   8: monitorenter
    //   9: aload_0
    //   10: getfield c : Ljava/lang/Object;
    //   13: astore #8
    //   15: aload #8
    //   17: monitorenter
    //   18: iconst_0
    //   19: istore_1
    //   20: iload_1
    //   21: aload_0
    //   22: getfield h : Ljava/util/ArrayList;
    //   25: invokevirtual size : ()I
    //   28: if_icmpge -> 205
    //   31: aload_0
    //   32: getfield h : Ljava/util/ArrayList;
    //   35: iload_1
    //   36: invokevirtual get : (I)Ljava/lang/Object;
    //   39: checkcast com/facebook/react/uimanager/events/c
    //   42: astore #4
    //   44: aload #4
    //   46: invokevirtual e : ()Z
    //   49: ifne -> 61
    //   52: aload_0
    //   53: aload #4
    //   55: invokespecial b : (Lcom/facebook/react/uimanager/events/c;)V
    //   58: goto -> 245
    //   61: aload_0
    //   62: aload #4
    //   64: invokevirtual c : ()I
    //   67: aload #4
    //   69: invokevirtual b : ()Ljava/lang/String;
    //   72: aload #4
    //   74: invokevirtual f : ()S
    //   77: invokespecial a : (ILjava/lang/String;S)J
    //   80: lstore_2
    //   81: aload_0
    //   82: getfield e : Landroid/util/LongSparseArray;
    //   85: lload_2
    //   86: invokevirtual get : (J)Ljava/lang/Object;
    //   89: checkcast java/lang/Integer
    //   92: astore #9
    //   94: aconst_null
    //   95: astore #5
    //   97: aload #9
    //   99: ifnonnull -> 120
    //   102: aload_0
    //   103: getfield e : Landroid/util/LongSparseArray;
    //   106: lload_2
    //   107: aload_0
    //   108: getfield n : I
    //   111: invokestatic valueOf : (I)Ljava/lang/Integer;
    //   114: invokevirtual put : (JLjava/lang/Object;)V
    //   117: goto -> 181
    //   120: aload_0
    //   121: getfield m : [Lcom/facebook/react/uimanager/events/c;
    //   124: aload #9
    //   126: invokevirtual intValue : ()I
    //   129: aaload
    //   130: astore #5
    //   132: aload #4
    //   134: aload #5
    //   136: invokevirtual a : (Lcom/facebook/react/uimanager/events/c;)Lcom/facebook/react/uimanager/events/c;
    //   139: astore #6
    //   141: aload #6
    //   143: aload #5
    //   145: if_acmpeq -> 235
    //   148: aload_0
    //   149: getfield e : Landroid/util/LongSparseArray;
    //   152: lload_2
    //   153: aload_0
    //   154: getfield n : I
    //   157: invokestatic valueOf : (I)Ljava/lang/Integer;
    //   160: invokevirtual put : (JLjava/lang/Object;)V
    //   163: aload_0
    //   164: getfield m : [Lcom/facebook/react/uimanager/events/c;
    //   167: aload #9
    //   169: invokevirtual intValue : ()I
    //   172: aconst_null
    //   173: aastore
    //   174: aload #6
    //   176: astore #4
    //   178: goto -> 181
    //   181: aload #4
    //   183: ifnull -> 192
    //   186: aload_0
    //   187: aload #4
    //   189: invokespecial b : (Lcom/facebook/react/uimanager/events/c;)V
    //   192: aload #5
    //   194: ifnull -> 245
    //   197: aload #5
    //   199: invokevirtual i : ()V
    //   202: goto -> 245
    //   205: aload #8
    //   207: monitorexit
    //   208: aload_0
    //   209: getfield h : Ljava/util/ArrayList;
    //   212: invokevirtual clear : ()V
    //   215: aload #7
    //   217: monitorexit
    //   218: return
    //   219: astore #4
    //   221: aload #8
    //   223: monitorexit
    //   224: aload #4
    //   226: athrow
    //   227: astore #4
    //   229: aload #7
    //   231: monitorexit
    //   232: aload #4
    //   234: athrow
    //   235: aload #4
    //   237: astore #5
    //   239: aconst_null
    //   240: astore #4
    //   242: goto -> 181
    //   245: iload_1
    //   246: iconst_1
    //   247: iadd
    //   248: istore_1
    //   249: goto -> 20
    // Exception table:
    //   from	to	target	type
    //   9	18	227	finally
    //   20	58	219	finally
    //   61	94	219	finally
    //   102	117	219	finally
    //   120	141	219	finally
    //   148	174	219	finally
    //   186	192	219	finally
    //   197	202	219	finally
    //   205	208	219	finally
    //   208	218	227	finally
    //   221	224	219	finally
    //   224	227	227	finally
    //   229	232	227	finally }
  
  private void g() {
    Arrays.fill(this.m, 0, this.n, null);
    this.n = 0;
  }
  
  public void a() { d(); }
  
  public void a(int paramInt) { this.o.unregister(paramInt); }
  
  public void a(int paramInt, RCTEventEmitter paramRCTEventEmitter) { this.o.register(paramInt, paramRCTEventEmitter); }
  
  public void a(a parama) { this.j.add(parama); }
  
  public void a(c paramc) {
    a.a(paramc.h(), "Dispatched event hasn't been initialized");
    Iterator iterator = this.i.iterator();
    while (iterator.hasNext())
      ((e)iterator.next()).a(paramc); 
    synchronized (this.b) {
      this.h.add(paramc);
      a.d(0L, paramc.b(), paramc.g());
      d();
      return;
    } 
  }
  
  public void a(e parame) { this.i.add(parame); }
  
  public void b() { UiThreadUtil.runOnUiThread(new Object(this)); }
  
  public void b(a parama) { this.j.remove(parama); }
  
  public void onHostDestroy() { e(); }
  
  public void onHostPause() { e(); }
  
  public void onHostResume() { this.k.d(); }
}
