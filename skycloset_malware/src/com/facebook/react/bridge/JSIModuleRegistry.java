package com.facebook.react.bridge;

import com.facebook.i.a.a;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

public class JSIModuleRegistry {
  private final Map<Class, JSIModuleHolder> mModules = new HashMap();
  
  public <T extends JSIModule> T getModule(Class<T> paramClass) {
    JSIModuleHolder jSIModuleHolder = (JSIModuleHolder)this.mModules.get(paramClass);
    if (jSIModuleHolder != null)
      return (T)(JSIModule)a.a(jSIModuleHolder.getJSIModule()); 
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("Unable to find JSIModule for class ");
    stringBuilder.append(paramClass);
    throw new IllegalArgumentException(stringBuilder.toString());
  }
  
  public void notifyJSInstanceDestroy() {
    Iterator iterator = this.mModules.values().iterator();
    while (iterator.hasNext())
      ((JSIModuleHolder)iterator.next()).notifyJSInstanceDestroy(); 
  }
  
  public void registerModules(List<JSIModuleSpec> paramList) {
    for (JSIModuleSpec jSIModuleSpec : paramList)
      this.mModules.put(jSIModuleSpec.getJSIModuleClass(), new JSIModuleHolder(jSIModuleSpec)); 
  }
}
