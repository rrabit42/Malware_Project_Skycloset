package com.facebook.h;

import android.util.Pair;
import java.io.IOException;
import java.io.InputStream;

public class e {
  public static Pair<Integer, Integer> a(InputStream paramInputStream) {
    arrayOfByte = new byte[4];
    try {
      paramInputStream.read(arrayOfByte);
      boolean bool = a(arrayOfByte, "RIFF");
      if (!bool) {
        if (paramInputStream != null)
          try {
            paramInputStream.close();
            return null;
          } catch (IOException paramInputStream) {
            paramInputStream.printStackTrace();
          }  
        return null;
      } 
      f(paramInputStream);
      paramInputStream.read(arrayOfByte);
      bool = a(arrayOfByte, "WEBP");
      if (!bool) {
        if (paramInputStream != null)
          try {
            paramInputStream.close();
            return null;
          } catch (IOException paramInputStream) {
            paramInputStream.printStackTrace();
          }  
        return null;
      } 
      paramInputStream.read(arrayOfByte);
      Pair pair = a(arrayOfByte);
      if ("VP8 ".equals(pair)) {
        pair = c(paramInputStream);
        if (paramInputStream != null)
          try {
            paramInputStream.close();
            return pair;
          } catch (IOException paramInputStream) {
            paramInputStream.printStackTrace();
          }  
        return pair;
      } 
      if ("VP8L".equals(pair)) {
        pair = d(paramInputStream);
        if (paramInputStream != null)
          try {
            paramInputStream.close();
            return pair;
          } catch (IOException paramInputStream) {
            paramInputStream.printStackTrace();
          }  
        return pair;
      } 
      if ("VP8X".equals(pair)) {
        pair = e(paramInputStream);
        if (paramInputStream != null)
          try {
            paramInputStream.close();
            return pair;
          } catch (IOException paramInputStream) {
            paramInputStream.printStackTrace();
          }  
        return pair;
      } 
      if (paramInputStream != null)
        try {
          paramInputStream.close();
          return null;
        } catch (IOException paramInputStream) {
          paramInputStream.printStackTrace();
        }  
    } catch (IOException arrayOfByte) {
      arrayOfByte.printStackTrace();
      if (paramInputStream != null) {
        paramInputStream.close();
        return null;
      } 
    } finally {}
    return null;
  }
  
  private static String a(byte[] paramArrayOfByte) {
    StringBuilder stringBuilder = new StringBuilder();
    for (byte b = 0; b < paramArrayOfByte.length; b++)
      stringBuilder.append((char)paramArrayOfByte[b]); 
    return stringBuilder.toString();
  }
  
  private static boolean a(byte[] paramArrayOfByte, String paramString) {
    if (paramArrayOfByte.length != paramString.length())
      return false; 
    for (byte b = 0; b < paramArrayOfByte.length; b++) {
      if (paramString.charAt(b) != paramArrayOfByte[b])
        return false; 
    } 
    return true;
  }
  
  public static int b(InputStream paramInputStream) {
    byte b = (byte)paramInputStream.read();
    return (byte)paramInputStream.read() << 8 & 0xFF00 | b & 0xFF;
  }
  
  private static Pair<Integer, Integer> c(InputStream paramInputStream) {
    paramInputStream.skip(7L);
    short s1 = h(paramInputStream);
    short s2 = h(paramInputStream);
    short s3 = h(paramInputStream);
    return (s1 != 157 || s2 != 1 || s3 != 42) ? null : new Pair(Integer.valueOf(b(paramInputStream)), Integer.valueOf(b(paramInputStream)));
  }
  
  private static Pair<Integer, Integer> d(InputStream paramInputStream) {
    f(paramInputStream);
    if (i(paramInputStream) != 47)
      return null; 
    byte b1 = (byte)paramInputStream.read();
    byte b2 = (byte)paramInputStream.read() & 0xFF;
    byte b3 = (byte)paramInputStream.read();
    return new Pair(Integer.valueOf((b1 & 0xFF | (b2 & 0x3F) << 8) + 1), Integer.valueOf((((byte)paramInputStream.read() & 0xFF & 0xF) << 10 | (b3 & 0xFF) << 2 | (b2 & 0xC0) >> 6) + 1));
  }
  
  private static Pair<Integer, Integer> e(InputStream paramInputStream) {
    paramInputStream.skip(8L);
    return new Pair(Integer.valueOf(g(paramInputStream) + 1), Integer.valueOf(g(paramInputStream) + 1));
  }
  
  private static int f(InputStream paramInputStream) {
    byte b1 = (byte)paramInputStream.read();
    byte b2 = (byte)paramInputStream.read();
    byte b3 = (byte)paramInputStream.read();
    return (byte)paramInputStream.read() << 24 & 0xFF000000 | b3 << 16 & 0xFF0000 | b2 << 8 & 0xFF00 | b1 & 0xFF;
  }
  
  private static int g(InputStream paramInputStream) {
    byte b1 = i(paramInputStream);
    byte b2 = i(paramInputStream);
    return i(paramInputStream) << 16 & 0xFF0000 | b2 << 8 & 0xFF00 | b1 & 0xFF;
  }
  
  private static short h(InputStream paramInputStream) { return (short)(paramInputStream.read() & 0xFF); }
  
  private static byte i(InputStream paramInputStream) { return (byte)(paramInputStream.read() & 0xFF); }
}
