package com.facebook.h;

import com.facebook.common.e.a;
import java.io.InputStream;

class d {
  private static final Class<?> a = d.class;
  
  public static int a(int paramInt) {
    if (paramInt != 3) {
      if (paramInt != 6) {
        if (paramInt != 8) {
          switch (paramInt) {
          
          } 
          return 0;
        } 
        return 270;
      } 
      return 90;
    } 
    return 180;
  }
  
  public static int a(InputStream paramInputStream, int paramInt) {
    a a1 = new a(null);
    paramInt = a(paramInputStream, paramInt, a1);
    int i = a1.c - 8;
    if (paramInt == 0 || i > paramInt)
      return 0; 
    paramInputStream.skip(i);
    return a(paramInputStream, a(paramInputStream, paramInt - i, a1.a, 274), a1.a);
  }
  
  private static int a(InputStream paramInputStream, int paramInt, a parama) {
    boolean bool;
    String str;
    Class clazz;
    if (paramInt <= 8)
      return 0; 
    parama.b = c.a(paramInputStream, 4, false);
    if (parama.b != 1229531648 && parama.b != 1296891946) {
      clazz = a;
      str = "Invalid TIFF header";
      a.c(clazz, str);
      return 0;
    } 
    if (str.b == 1229531648) {
      bool = true;
    } else {
      bool = false;
    } 
    str.a = bool;
    str.c = c.a(clazz, 4, str.a);
    paramInt = paramInt - 4 - 4;
    if (str.c < 8 || str.c - 8 > paramInt) {
      clazz = a;
      str = "Invalid offset";
      a.c(clazz, str);
      return 0;
    } 
    return paramInt;
  }
  
  private static int a(InputStream paramInputStream, int paramInt, boolean paramBoolean) {
    if (paramInt < 10)
      return 0; 
    if (c.a(paramInputStream, 2, paramBoolean) != 3)
      return 0; 
    if (c.a(paramInputStream, 4, paramBoolean) != 1)
      return 0; 
    paramInt = c.a(paramInputStream, 2, paramBoolean);
    c.a(paramInputStream, 2, paramBoolean);
    return paramInt;
  }
  
  private static int a(InputStream paramInputStream, int paramInt1, boolean paramBoolean, int paramInt2) {
    if (paramInt1 < 14)
      return 0; 
    int j = c.a(paramInputStream, 2, paramBoolean);
    int i = paramInt1 - 2;
    for (paramInt1 = j; paramInt1 > 0 && i >= 12; paramInt1--) {
      j = c.a(paramInputStream, 2, paramBoolean);
      i -= 2;
      if (j == paramInt2)
        return i; 
      paramInputStream.skip(10L);
      i -= 10;
    } 
    return 0;
  }
}
