package com.google.android.gms.auth.api.signin;

import android.accounts.Account;
import android.net.Uri;
import android.os.Parcel;
import android.os.Parcelable;
import android.text.TextUtils;
import com.google.android.gms.b.a;
import com.google.android.gms.b.d;
import com.google.android.gms.common.api.Scope;
import com.google.android.gms.common.internal.ReflectedParcelable;
import com.google.android.gms.common.internal.af;
import com.google.android.gms.common.util.b;
import com.google.android.gms.common.util.c;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Set;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class GoogleSignInAccount extends a implements ReflectedParcelable {
  public static final Parcelable.Creator<GoogleSignInAccount> CREATOR = new b();
  
  private static b a = c.b();
  
  private static Comparator<Scope> n = new a();
  
  private int b;
  
  private String c;
  
  private String d;
  
  private String e;
  
  private String f;
  
  private Uri g;
  
  private String h;
  
  private long i;
  
  private String j;
  
  private List<Scope> k;
  
  private String l;
  
  private String m;
  
  GoogleSignInAccount(int paramInt, String paramString1, String paramString2, String paramString3, String paramString4, Uri paramUri, String paramString5, long paramLong, String paramString6, List<Scope> paramList, String paramString7, String paramString8) {
    this.b = paramInt;
    this.c = paramString1;
    this.d = paramString2;
    this.e = paramString3;
    this.f = paramString4;
    this.g = paramUri;
    this.h = paramString5;
    this.i = paramLong;
    this.j = paramString6;
    this.k = paramList;
    this.l = paramString7;
    this.m = paramString8;
  }
  
  public static GoogleSignInAccount a(String paramString) {
    if (TextUtils.isEmpty(paramString))
      return null; 
    JSONObject jSONObject = new JSONObject(paramString);
    paramString = jSONObject.optString("photoUrl", null);
    if (!TextUtils.isEmpty(paramString)) {
      Uri uri = Uri.parse(paramString);
    } else {
      paramString = null;
    } 
    long l1 = Long.parseLong(jSONObject.getString("expirationTime"));
    HashSet hashSet = new HashSet();
    JSONArray jSONArray = jSONObject.getJSONArray("grantedScopes");
    int i1 = jSONArray.length();
    for (byte b1 = 0; b1 < i1; b1++)
      hashSet.add(new Scope(jSONArray.getString(b1))); 
    String str1 = jSONObject.optString("id");
    String str2 = jSONObject.optString("tokenId", null);
    String str3 = jSONObject.optString("email", null);
    String str4 = jSONObject.optString("displayName", null);
    String str5 = jSONObject.optString("givenName", null);
    String str6 = jSONObject.optString("familyName", null);
    Long long2 = Long.valueOf(l1);
    String str7 = jSONObject.getString("obfuscatedIdentifier");
    Long long1 = long2;
    if (long2 == null)
      long1 = Long.valueOf(a.a() / 1000L); 
    GoogleSignInAccount googleSignInAccount = new GoogleSignInAccount(3, str1, str2, str3, str4, paramString, null, long1.longValue(), af.a(str7), new ArrayList((Collection)af.a(hashSet)), str5, str6);
    googleSignInAccount.h = jSONObject.optString("serverAuthCode", null);
    return googleSignInAccount;
  }
  
  private final JSONObject k() {
    jSONObject = new JSONObject();
    try {
      if (a() != null)
        jSONObject.put("id", a()); 
      if (b() != null)
        jSONObject.put("tokenId", b()); 
      if (c() != null)
        jSONObject.put("email", c()); 
      if (e() != null)
        jSONObject.put("displayName", e()); 
      if (f() != null)
        jSONObject.put("givenName", f()); 
      if (g() != null)
        jSONObject.put("familyName", g()); 
      if (h() != null)
        jSONObject.put("photoUrl", h().toString()); 
      if (i() != null)
        jSONObject.put("serverAuthCode", i()); 
      jSONObject.put("expirationTime", this.i);
      jSONObject.put("obfuscatedIdentifier", this.j);
      JSONArray jSONArray = new JSONArray();
      Collections.sort(this.k, n);
      Iterator iterator = this.k.iterator();
      while (iterator.hasNext())
        jSONArray.put(((Scope)iterator.next()).a()); 
      jSONObject.put("grantedScopes", jSONArray);
      return jSONObject;
    } catch (JSONException jSONObject) {
      throw new RuntimeException(jSONObject);
    } 
  }
  
  public String a() { return this.c; }
  
  public String b() { return this.d; }
  
  public String c() { return this.e; }
  
  public Account d() {
    String str = this.e;
    return (str == null) ? null : new Account(str, "com.google");
  }
  
  public String e() { return this.f; }
  
  public boolean equals(Object paramObject) { return !(paramObject instanceof GoogleSignInAccount) ? false : ((GoogleSignInAccount)paramObject).k().toString().equals(k().toString()); }
  
  public String f() { return this.l; }
  
  public String g() { return this.m; }
  
  public Uri h() { return this.g; }
  
  public int hashCode() { return k().toString().hashCode(); }
  
  public String i() { return this.h; }
  
  public Set<Scope> j() { return new HashSet(this.k); }
  
  public void writeToParcel(Parcel paramParcel, int paramInt) {
    int i1 = d.a(paramParcel);
    d.a(paramParcel, 1, this.b);
    d.a(paramParcel, 2, a(), false);
    d.a(paramParcel, 3, b(), false);
    d.a(paramParcel, 4, c(), false);
    d.a(paramParcel, 5, e(), false);
    d.a(paramParcel, 6, h(), paramInt, false);
    d.a(paramParcel, 7, i(), false);
    d.a(paramParcel, 8, this.i);
    d.a(paramParcel, 9, this.j, false);
    d.a(paramParcel, 10, this.k, false);
    d.a(paramParcel, 11, f(), false);
    d.a(paramParcel, 12, g(), false);
    d.a(paramParcel, i1);
  }
}
