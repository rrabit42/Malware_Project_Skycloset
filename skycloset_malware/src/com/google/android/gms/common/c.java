package com.google.android.gms.common;

import android.annotation.TargetApi;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.FragmentManager;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.DialogInterface;
import android.content.IntentFilter;
import android.content.res.Resources;
import android.support.v4.app.g;
import android.support.v4.app.k;
import android.support.v4.app.w;
import android.util.Log;
import android.util.TypedValue;
import android.widget.ProgressBar;
import com.google.android.gms.a;
import com.google.android.gms.common.api.GoogleApiActivity;
import com.google.android.gms.common.api.internal.p;
import com.google.android.gms.common.api.internal.q;
import com.google.android.gms.common.api.internal.t;
import com.google.android.gms.common.internal.af;
import com.google.android.gms.common.internal.ba;
import com.google.android.gms.common.internal.bb;
import com.google.android.gms.common.util.d;
import com.google.android.gms.common.util.f;

public class c extends i {
  public static final int a;
  
  private static final c c = new c();
  
  static  {
    a = i.b;
  }
  
  public static Dialog a(Activity paramActivity, DialogInterface.OnCancelListener paramOnCancelListener) {
    ProgressBar progressBar = new ProgressBar(paramActivity, null, 16842874);
    progressBar.setIndeterminate(true);
    progressBar.setVisibility(0);
    AlertDialog.Builder builder = new AlertDialog.Builder(paramActivity);
    builder.setView(progressBar);
    builder.setMessage(ba.c(paramActivity, 18));
    builder.setPositiveButton("", null);
    AlertDialog alertDialog = builder.create();
    a(paramActivity, alertDialog, "GooglePlayServicesUpdatingDialog", paramOnCancelListener);
    return alertDialog;
  }
  
  static Dialog a(Context paramContext, int paramInt, bb parambb, DialogInterface.OnCancelListener paramOnCancelListener) {
    AlertDialog.Builder builder1 = null;
    if (paramInt == 0)
      return null; 
    TypedValue typedValue = new TypedValue();
    paramContext.getTheme().resolveAttribute(16843529, typedValue, true);
    if ("Theme.Dialog.Alert".equals(paramContext.getResources().getResourceEntryName(typedValue.resourceId)))
      builder1 = new AlertDialog.Builder(paramContext, 5); 
    AlertDialog.Builder builder2 = builder1;
    if (builder1 == null)
      builder2 = new AlertDialog.Builder(paramContext); 
    builder2.setMessage(ba.c(paramContext, paramInt));
    if (paramOnCancelListener != null)
      builder2.setOnCancelListener(paramOnCancelListener); 
    String str2 = ba.e(paramContext, paramInt);
    if (str2 != null)
      builder2.setPositiveButton(str2, parambb); 
    String str1 = ba.a(paramContext, paramInt);
    if (str1 != null)
      builder2.setTitle(str1); 
    return builder2.create();
  }
  
  public static p a(Context paramContext, q paramq) {
    IntentFilter intentFilter = new IntentFilter("android.intent.action.PACKAGE_ADDED");
    intentFilter.addDataScheme("package");
    p p = new p(paramq);
    paramContext.registerReceiver(p, intentFilter);
    p.a(paramContext);
    if (!q.a(paramContext, "com.google.android.gms")) {
      paramq.a();
      p.a();
      return null;
    } 
    return p;
  }
  
  public static c a() { return c; }
  
  static void a(Activity paramActivity, Dialog paramDialog, String paramString, DialogInterface.OnCancelListener paramOnCancelListener) {
    k k;
    if (paramActivity instanceof g) {
      k = ((g)paramActivity).f();
      e.a(paramDialog, paramOnCancelListener).a(k, paramString);
      return;
    } 
    FragmentManager fragmentManager = k.getFragmentManager();
    b.a(paramDialog, paramOnCancelListener).show(fragmentManager, paramString);
  }
  
  @TargetApi(20)
  private final void a(Context paramContext, int paramInt, String paramString, PendingIntent paramPendingIntent) {
    Notification notification;
    if (paramInt == 18) {
      b(paramContext);
      return;
    } 
    if (paramPendingIntent == null) {
      if (paramInt == 6)
        Log.w("GoogleApiAvailability", "Missing resolution for ConnectionResult.RESOLUTION_REQUIRED. Call GoogleApiAvailability#showErrorNotification(Context, ConnectionResult) instead."); 
      return;
    } 
    paramString = ba.b(paramContext, paramInt);
    String str = ba.d(paramContext, paramInt);
    Resources resources = paramContext.getResources();
    if (d.b(paramContext)) {
      af.a(f.d());
      notification = (new Notification.Builder(paramContext)).setSmallIcon((paramContext.getApplicationInfo()).icon).setPriority(2).setAutoCancel(true).setContentTitle(paramString).setStyle((new Notification.BigTextStyle()).bigText(str)).addAction(a.a.common_full_open_on_phone, resources.getString(a.b.common_open_on_phone), paramPendingIntent).build();
    } else {
      notification = (new w.c(paramContext)).a(17301642).c(resources.getString(a.b.common_google_play_services_notification_ticker)).a(System.currentTimeMillis()).a(true).a(paramPendingIntent).a(notification).b(str).b(true).a((new w.b()).a(str)).b();
    } 
    switch (paramInt) {
      default:
        paramInt = 39789;
        break;
      case 1:
      case 2:
      case 3:
        paramInt = 10436;
        q.c.set(false);
        break;
    } 
    ((NotificationManager)paramContext.getSystemService("notification")).notify(paramInt, notification);
  }
  
  public int a(Context paramContext) { return super.a(paramContext); }
  
  public Dialog a(Activity paramActivity, int paramInt1, int paramInt2, DialogInterface.OnCancelListener paramOnCancelListener) { return a(paramActivity, paramInt1, bb.a(paramActivity, i.a(paramActivity, paramInt1, "d"), paramInt2), paramOnCancelListener); }
  
  public PendingIntent a(Context paramContext, int paramInt1, int paramInt2) { return super.a(paramContext, paramInt1, paramInt2); }
  
  public PendingIntent a(Context paramContext, a parama) { return parama.a() ? parama.d() : super.a(paramContext, parama.c(), 0); }
  
  public void a(Context paramContext, int paramInt) { a(paramContext, paramInt, null, a(paramContext, paramInt, 0, "n")); }
  
  public final boolean a(int paramInt) { return super.a(paramInt); }
  
  public final boolean a(Activity paramActivity, t paramt, int paramInt1, int paramInt2, DialogInterface.OnCancelListener paramOnCancelListener) {
    Dialog dialog = a(paramActivity, paramInt1, bb.a(paramt, i.a(paramActivity, paramInt1, "d"), 2), paramOnCancelListener);
    if (dialog == null)
      return false; 
    a(paramActivity, dialog, "GooglePlayServicesErrorDialog", paramOnCancelListener);
    return true;
  }
  
  public final boolean a(Context paramContext, a parama, int paramInt) {
    PendingIntent pendingIntent = a(paramContext, parama);
    if (pendingIntent != null) {
      a(paramContext, parama.c(), null, GoogleApiActivity.a(paramContext, pendingIntent, paramInt));
      return true;
    } 
    return false;
  }
  
  public final String b(int paramInt) { return super.b(paramInt); }
  
  final void b(Context paramContext) { (new a(this, paramContext)).sendEmptyMessageDelayed(1, 120000L); }
  
  public boolean b(Activity paramActivity, int paramInt1, int paramInt2, DialogInterface.OnCancelListener paramOnCancelListener) {
    Dialog dialog = a(paramActivity, paramInt1, paramInt2, paramOnCancelListener);
    if (dialog == null)
      return false; 
    a(paramActivity, dialog, "GooglePlayServicesErrorDialog", paramOnCancelListener);
    return true;
  }
}
