package com.google.android.gms.common.api.internal;

import android.os.Bundle;
import android.os.DeadObjectException;
import android.os.Looper;
import android.os.Message;
import com.google.android.gms.c.e;
import com.google.android.gms.common.a;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.common.api.a;
import com.google.android.gms.common.api.e;
import com.google.android.gms.common.api.f;
import com.google.android.gms.common.internal.af;
import com.google.android.gms.common.internal.ak;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Map;
import java.util.Queue;
import java.util.Set;

public final class j<O extends a.a> extends Object implements f.a, f.b, bj {
  private final Queue<a> a = new LinkedList();
  
  private final a.f b;
  
  private final a.c c;
  
  private final av<O> d;
  
  private final b e;
  
  private final Set<aw> f = new HashSet();
  
  private final Map<w<?>, ab> g = new HashMap();
  
  private final int h;
  
  private final ae i;
  
  private boolean j;
  
  private a k = null;
  
  public j(h paramh, e<O> parame) {
    this.b = parame.a(h.a(paramh).getLooper(), this);
    a.f f1 = this.b;
    a.h h1 = f1;
    if (f1 instanceof ak)
      h1 = ak.k(); 
    this.c = h1;
    this.d = parame.a();
    this.e = new b();
    this.h = parame.b();
    if (this.b.d()) {
      this.i = parame.a(h.b(paramh), h.a(paramh));
      return;
    } 
    this.i = null;
  }
  
  private final void b(a parama) {
    parama.a(this.e, k());
    try {
      parama.a(this);
      return;
    } catch (DeadObjectException parama) {
      a(1);
      this.b.a();
      return;
    } 
  }
  
  private final void c(a parama) {
    Iterator iterator = this.f.iterator();
    while (iterator.hasNext())
      ((aw)iterator.next()).a(this.d, parama); 
    this.f.clear();
  }
  
  private final void m() { // Byte code:
    //   0: aload_0
    //   1: invokevirtual d : ()V
    //   4: aload_0
    //   5: getstatic com/google/android/gms/common/a.a : Lcom/google/android/gms/common/a;
    //   8: invokespecial c : (Lcom/google/android/gms/common/a;)V
    //   11: aload_0
    //   12: invokespecial o : ()V
    //   15: aload_0
    //   16: getfield g : Ljava/util/Map;
    //   19: invokeinterface values : ()Ljava/util/Collection;
    //   24: invokeinterface iterator : ()Ljava/util/Iterator;
    //   29: astore_1
    //   30: aload_1
    //   31: invokeinterface hasNext : ()Z
    //   36: ifeq -> 84
    //   39: aload_1
    //   40: invokeinterface next : ()Ljava/lang/Object;
    //   45: checkcast com/google/android/gms/common/api/internal/ab
    //   48: astore_2
    //   49: aload_2
    //   50: getfield a : Lcom/google/android/gms/common/api/internal/aa;
    //   53: aload_0
    //   54: getfield c : Lcom/google/android/gms/common/api/a$c;
    //   57: new com/google/android/gms/c/e
    //   60: dup
    //   61: invokespecial <init> : ()V
    //   64: invokevirtual a : (Lcom/google/android/gms/common/api/a$c;Lcom/google/android/gms/c/e;)V
    //   67: goto -> 30
    //   70: aload_0
    //   71: iconst_1
    //   72: invokevirtual a : (I)V
    //   75: aload_0
    //   76: getfield b : Lcom/google/android/gms/common/api/a$f;
    //   79: invokeinterface a : ()V
    //   84: aload_0
    //   85: getfield b : Lcom/google/android/gms/common/api/a$f;
    //   88: invokeinterface b : ()Z
    //   93: ifeq -> 127
    //   96: aload_0
    //   97: getfield a : Ljava/util/Queue;
    //   100: invokeinterface isEmpty : ()Z
    //   105: ifne -> 127
    //   108: aload_0
    //   109: aload_0
    //   110: getfield a : Ljava/util/Queue;
    //   113: invokeinterface remove : ()Ljava/lang/Object;
    //   118: checkcast com/google/android/gms/common/api/internal/a
    //   121: invokespecial b : (Lcom/google/android/gms/common/api/internal/a;)V
    //   124: goto -> 84
    //   127: aload_0
    //   128: invokespecial p : ()V
    //   131: return
    //   132: astore_1
    //   133: goto -> 70
    //   136: astore_2
    //   137: goto -> 30
    // Exception table:
    //   from	to	target	type
    //   49	67	132	android/os/DeadObjectException
    //   49	67	136	android/os/RemoteException }
  
  private final void n() {
    d();
    this.j = true;
    this.e.c();
    h.a(this.l).sendMessageDelayed(Message.obtain(h.a(this.l), 9, this.d), h.c(this.l));
    h.a(this.l).sendMessageDelayed(Message.obtain(h.a(this.l), 11, this.d), h.d(this.l));
    h.a(this.l, -1);
  }
  
  private final void o() {
    if (this.j) {
      h.a(this.l).removeMessages(11, this.d);
      h.a(this.l).removeMessages(9, this.d);
      this.j = false;
    } 
  }
  
  private final void p() {
    h.a(this.l).removeMessages(12, this.d);
    h.a(this.l).sendMessageDelayed(h.a(this.l).obtainMessage(12, this.d), h.h(this.l));
  }
  
  public final void a() {
    af.a(h.a(this.l));
    a(h.a);
    this.e.b();
    Iterator iterator = this.g.keySet().iterator();
    while (iterator.hasNext())
      a(new at((w)iterator.next(), new e())); 
    c(new a(4));
    this.b.a();
  }
  
  public final void a(int paramInt) {
    if (Looper.myLooper() == h.a(this.l).getLooper()) {
      n();
      return;
    } 
    h.a(this.l).post(new l(this));
  }
  
  public final void a(Bundle paramBundle) {
    if (Looper.myLooper() == h.a(this.l).getLooper()) {
      m();
      return;
    } 
    h.a(this.l).post(new k(this));
  }
  
  public final void a(a parama) {
    af.a(h.a(this.l));
    ae ae1 = this.i;
    if (ae1 != null)
      ae1.a(); 
    d();
    h.a(this.l, -1);
    c(parama);
    if (parama.c() == 4) {
      a(h.c());
      return;
    } 
    if (this.a.isEmpty()) {
      this.k = parama;
      return;
    } 
    synchronized (h.d()) {
      if (h.e(this.l) != null && h.f(this.l).contains(this.d)) {
        h.e(this.l).b(parama, this.h);
        return;
      } 
      if (!this.l.a(parama, this.h)) {
        if (parama.c() == 18)
          this.j = true; 
        if (this.j) {
          h.a(this.l).sendMessageDelayed(Message.obtain(h.a(this.l), 9, this.d), h.c(this.l));
          return;
        } 
        String str;
        null = new StringBuilder((str = this.d.a()).valueOf(str).length() + 38);
        null.append("API: ");
        null.append(str);
        null.append(" is not available on this device.");
        a(new Status(17, null.toString()));
      } 
      return;
    } 
  }
  
  public final void a(Status paramStatus) {
    af.a(h.a(this.l));
    Iterator iterator = this.a.iterator();
    while (iterator.hasNext())
      ((a)iterator.next()).a(paramStatus); 
    this.a.clear();
  }
  
  public final void a(a parama) {
    af.a(h.a(this.l));
    if (this.b.b()) {
      b(parama);
      p();
      return;
    } 
    this.a.add(parama);
    a a1 = this.k;
    if (a1 != null && a1.a()) {
      a(this.k);
      return;
    } 
    i();
  }
  
  public final void a(aw paramaw) {
    af.a(h.a(this.l));
    this.f.add(paramaw);
  }
  
  public final a.f b() { return this.b; }
  
  public final void b(a parama) {
    af.a(h.a(this.l));
    this.b.a();
    a(parama);
  }
  
  public final Map<w<?>, ab> c() { return this.g; }
  
  public final void d() {
    af.a(h.a(this.l));
    this.k = null;
  }
  
  public final a e() {
    af.a(h.a(this.l));
    return this.k;
  }
  
  public final void f() {
    af.a(h.a(this.l));
    if (this.j)
      i(); 
  }
  
  public final void g() {
    af.a(h.a(this.l));
    if (this.j) {
      Status status;
      o();
      if (h.g(this.l).a(h.b(this.l)) == 18) {
        status = new Status(8, "Connection timed out while waiting for Google Play services update to complete.");
      } else {
        status = new Status(8, "API failed to connect while resuming due to an unknown error.");
      } 
      a(status);
      this.b.a();
    } 
  }
  
  public final void h() {
    af.a(h.a(this.l));
    if (this.b.b() && this.g.size() == 0) {
      if (this.e.a()) {
        p();
        return;
      } 
      this.b.a();
    } 
  }
  
  public final void i() {
    af.a(h.a(this.l));
    if (!this.b.b()) {
      if (this.b.c())
        return; 
      if (this.b.e() && h.i(this.l) != 0) {
        h h1;
        h.a(h1, (h1 = this.l).g(h1).a(h.b(this.l)));
        if (h.i(this.l) != 0) {
          a(new a(h.i(this.l), null));
          return;
        } 
      } 
      m m = new m(this.l, this.b, this.d);
      if (this.b.d())
        this.i.a(m); 
      this.b.a(m);
    } 
  }
  
  final boolean j() { return this.b.b(); }
  
  public final boolean k() { return this.b.d(); }
  
  public final int l() { return this.h; }
}
