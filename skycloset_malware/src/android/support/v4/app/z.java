package android.support.v4.app;

import android.view.View;
import android.view.ViewTreeObserver;

class z implements View.OnAttachStateChangeListener, ViewTreeObserver.OnPreDrawListener {
  private final View a;
  
  private ViewTreeObserver b;
  
  private final Runnable c;
  
  private z(View paramView, Runnable paramRunnable) {
    this.a = paramView;
    this.b = paramView.getViewTreeObserver();
    this.c = paramRunnable;
  }
  
  public static z a(View paramView, Runnable paramRunnable) {
    z z1 = new z(paramView, paramRunnable);
    paramView.getViewTreeObserver().addOnPreDrawListener(z1);
    paramView.addOnAttachStateChangeListener(z1);
    return z1;
  }
  
  public void a() {
    ViewTreeObserver viewTreeObserver;
    if (this.b.isAlive()) {
      viewTreeObserver = this.b;
    } else {
      viewTreeObserver = this.a.getViewTreeObserver();
    } 
    viewTreeObserver.removeOnPreDrawListener(this);
    this.a.removeOnAttachStateChangeListener(this);
  }
  
  public boolean onPreDraw() {
    a();
    this.c.run();
    return true;
  }
  
  public void onViewAttachedToWindow(View paramView) { this.b = paramView.getViewTreeObserver(); }
  
  public void onViewDetachedFromWindow(View paramView) { a(); }
}
